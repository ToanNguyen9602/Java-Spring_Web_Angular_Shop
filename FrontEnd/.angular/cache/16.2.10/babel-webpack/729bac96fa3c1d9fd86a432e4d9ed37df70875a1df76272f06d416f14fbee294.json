{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { environtment } from 'src/app/environments/environment';\nexport let HomeComponent = class HomeComponent {\n  constructor(productService) {\n    this.productService = productService;\n    this.products = [];\n    this.currentPage = 1;\n    this.itemPerPage = 10;\n    this.pages = [];\n    this.totalPages = 0;\n    this.visiblePages = [];\n  }\n  ngOnInit() {\n    this.getProducts(this.currentPage, this.itemPerPage);\n  }\n  getProducts(page, limit) {\n    this.productService.getProducts(page, limit).subscribe({\n      next: response => {\n        debugger;\n        response.products.forEach(product => {\n          //show image\n          product.url = `${environtment.apiBaseUrl}/products/images/${product.thumbnail}`;\n        });\n        this.products = response.products;\n        this.totalPages = response.totalPages;\n        this.visiblePages = this.generateVisiblePageArray(this.currentPage, this.totalPages);\n      },\n      complete: () => {\n        debugger;\n      },\n      error: error => {\n        console.error('Error getting products: ', error);\n      }\n    });\n  }\n  onPageChange(page) {\n    debugger;\n    this.currentPage = page;\n    this.getProducts(this.currentPage, this.itemPerPage);\n  }\n  generateVisiblePageArray(currentPage, totalPages) {\n    const maxVisiblePages = 5;\n    const halfVisiblePage = Math.floor(maxVisiblePages / 2);\n    let startPage = Math.max(currentPage - halfVisiblePage, 1);\n    let endPage = Math.min(startPage + maxVisiblePages - 1, totalPages);\n    if (endPage - startPage + 1 < maxVisiblePages) {\n      startPage = Math.max(endPage - maxVisiblePages + 1, 1);\n    }\n    return new Array(endPage - startPage + 1).fill(0).map((_, index) => startPage + index);\n  }\n};\nHomeComponent = __decorate([Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss']\n})], HomeComponent);","map":{"version":3,"names":["Component","environtment","HomeComponent","constructor","productService","products","currentPage","itemPerPage","pages","totalPages","visiblePages","ngOnInit","getProducts","page","limit","subscribe","next","response","forEach","product","url","apiBaseUrl","thumbnail","generateVisiblePageArray","complete","error","console","onPageChange","maxVisiblePages","halfVisiblePage","Math","floor","startPage","max","endPage","min","Array","fill","map","_","index","__decorate","selector","templateUrl","styleUrls"],"sources":["/Users/toannguyenduc/Desktop/ShopApp/Java-Spring_Web_Angular_Shop/FrontEnd/src/app/components/home/home.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Product } from 'src/app/dtos/product/product';\nimport { environtment } from 'src/app/environments/environment';\nimport { ProductService } from 'src/app/service/product.service';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss']\n})\nexport class HomeComponent implements OnInit {\n  products: Product[] = [];\n  currentPage: number = 1;\n  itemPerPage: number = 10;\n  pages: number[] = [];\n  totalPages: number = 0;\n  visiblePages: number[] = [];\n\n  constructor(private productService: ProductService) { }\n\n  ngOnInit(): void {\n    this.getProducts(this.currentPage, this.itemPerPage);\n  }\n\n  getProducts(page: number, limit: number){\n    this.productService.getProducts(page, limit).subscribe({\n      next: (response: any) => {\n        debugger\n        response.products.forEach((product: Product) => { \n          //show image\n          product.url = `${environtment.apiBaseUrl}/products/images/${product.thumbnail}`;\n        });\n        this.products = response.products;\n        this.totalPages = response.totalPages;\n        this.visiblePages = this.generateVisiblePageArray(this.currentPage, this.totalPages);\n      },\n      complete: () => {debugger},\n      error: (error: any) => {\n        console.error('Error getting products: ', error);\n      }\n    });\n  }\n  onPageChange(page: number) {\n    debugger;\n    this.currentPage = page;\n    this.getProducts(this.currentPage, this.itemPerPage);\n  }\n\n  generateVisiblePageArray(currentPage: number, totalPages: number):number[] {\n    const maxVisiblePages = 5;\n    const halfVisiblePage = Math.floor(maxVisiblePages/2);\n\n    let startPage = Math.max(currentPage - halfVisiblePage, 1);\n    let endPage = Math.min(startPage + maxVisiblePages - 1, totalPages);\n  \n    if(endPage - startPage + 1 < maxVisiblePages) {\n      startPage = Math.max(endPage - maxVisiblePages + 1, 1);\n    }\n\n    return new Array(endPage - startPage + 1).fill(0)\n        .map((_, index) => startPage + index);\n  }\n\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAEjD,SAASC,YAAY,QAAQ,kCAAkC;AAQxD,WAAMC,aAAa,GAAnB,MAAMA,aAAa;EAQxBC,YAAoBC,cAA8B;IAA9B,KAAAA,cAAc,GAAdA,cAAc;IAPlC,KAAAC,QAAQ,GAAc,EAAE;IACxB,KAAAC,WAAW,GAAW,CAAC;IACvB,KAAAC,WAAW,GAAW,EAAE;IACxB,KAAAC,KAAK,GAAa,EAAE;IACpB,KAAAC,UAAU,GAAW,CAAC;IACtB,KAAAC,YAAY,GAAa,EAAE;EAE2B;EAEtDC,QAAQA,CAAA;IACN,IAAI,CAACC,WAAW,CAAC,IAAI,CAACN,WAAW,EAAE,IAAI,CAACC,WAAW,CAAC;EACtD;EAEAK,WAAWA,CAACC,IAAY,EAAEC,KAAa;IACrC,IAAI,CAACV,cAAc,CAACQ,WAAW,CAACC,IAAI,EAAEC,KAAK,CAAC,CAACC,SAAS,CAAC;MACrDC,IAAI,EAAGC,QAAa,IAAI;QACtB;QACAA,QAAQ,CAACZ,QAAQ,CAACa,OAAO,CAAEC,OAAgB,IAAI;UAC7C;UACAA,OAAO,CAACC,GAAG,GAAG,GAAGnB,YAAY,CAACoB,UAAU,oBAAoBF,OAAO,CAACG,SAAS,EAAE;QACjF,CAAC,CAAC;QACF,IAAI,CAACjB,QAAQ,GAAGY,QAAQ,CAACZ,QAAQ;QACjC,IAAI,CAACI,UAAU,GAAGQ,QAAQ,CAACR,UAAU;QACrC,IAAI,CAACC,YAAY,GAAG,IAAI,CAACa,wBAAwB,CAAC,IAAI,CAACjB,WAAW,EAAE,IAAI,CAACG,UAAU,CAAC;MACtF,CAAC;MACDe,QAAQ,EAAEA,CAAA,KAAK;QAAE;MAAQ,CAAC;MAC1BC,KAAK,EAAGA,KAAU,IAAI;QACpBC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAClD;KACD,CAAC;EACJ;EACAE,YAAYA,CAACd,IAAY;IACvB;IACA,IAAI,CAACP,WAAW,GAAGO,IAAI;IACvB,IAAI,CAACD,WAAW,CAAC,IAAI,CAACN,WAAW,EAAE,IAAI,CAACC,WAAW,CAAC;EACtD;EAEAgB,wBAAwBA,CAACjB,WAAmB,EAAEG,UAAkB;IAC9D,MAAMmB,eAAe,GAAG,CAAC;IACzB,MAAMC,eAAe,GAAGC,IAAI,CAACC,KAAK,CAACH,eAAe,GAAC,CAAC,CAAC;IAErD,IAAII,SAAS,GAAGF,IAAI,CAACG,GAAG,CAAC3B,WAAW,GAAGuB,eAAe,EAAE,CAAC,CAAC;IAC1D,IAAIK,OAAO,GAAGJ,IAAI,CAACK,GAAG,CAACH,SAAS,GAAGJ,eAAe,GAAG,CAAC,EAAEnB,UAAU,CAAC;IAEnE,IAAGyB,OAAO,GAAGF,SAAS,GAAG,CAAC,GAAGJ,eAAe,EAAE;MAC5CI,SAAS,GAAGF,IAAI,CAACG,GAAG,CAACC,OAAO,GAAGN,eAAe,GAAG,CAAC,EAAE,CAAC,CAAC;;IAGxD,OAAO,IAAIQ,KAAK,CAACF,OAAO,GAAGF,SAAS,GAAG,CAAC,CAAC,CAACK,IAAI,CAAC,CAAC,CAAC,CAC5CC,GAAG,CAAC,CAACC,CAAC,EAAEC,KAAK,KAAKR,SAAS,GAAGQ,KAAK,CAAC;EAC3C;CAED;AArDYtC,aAAa,GAAAuC,UAAA,EALzBzC,SAAS,CAAC;EACT0C,QAAQ,EAAE,UAAU;EACpBC,WAAW,EAAE,uBAAuB;EACpCC,SAAS,EAAE,CAAC,uBAAuB;CACpC,CAAC,C,EACW1C,aAAa,CAqDzB"},"metadata":{},"sourceType":"module","externalDependencies":[]}