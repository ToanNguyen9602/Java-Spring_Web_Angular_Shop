{"ast":null,"code":"export {};","map":{"version":3,"names":[],"sources":["/Users/toannguyenduc/Desktop/ShopApp/Java-Spring_Web_Angular_Shop/FrontEnd/src/app/service/cart.service.ts"],"sourcesContent":["import { ProductService } from 'src/app/service/product.service';\nimport { Injectable } from \"@angular/core\";\nimport { LocalStorageServic e} \n\n@Injectable({\n    providedIn: \"root\",\n  })\n\nexport class CartService {\n    private cart: Map<number, number> = new Map();\n\n    constructor(private productService : ProductService) {\n        //lấy dữ liệu giỏ hàng từ localStorage khi khởi tạo service\n        const storeCart = localStorage.getItem('cart');\n        if (storeCart) {\n            this.cart = new Map(JSON.parse(storeCart));\n        }\n    }\n    addToCart(productId: number, quantity: number = 1) :void {\n        debugger\n        if (this.cart.has(productId)) {\n            //nếu sản phẩm đã có trong giỏ hàng, tăng số lượng quantity lên\n            this.cart.set(productId, this.cart.get(productId)! + quantity);\n        } else {\n            //Nếu sản phẩm chưa có trao giỏ hàng thì thêm sản phẩm vào số luongjw với quantity\n            this.cart.set(productId, quantity);\n        }\n        //Sau khi thay đổi giỏ hàng, lưu trừ nó vào localStorage\n        this.saveCartToLocalStorage();\n    }\n    getCart(): Map<number,number> {\n        return this.cart;\n    }\n    private saveCartToLocalStorage():void {\n        debugger\n        localStorage.setItem('cart', JSON.stringify(Array.from(this.cart.entries())));\n    }\n    //xoá dữ liệu cart và cập nhật Local Storage\n    clearCart(): void {\n        this.cart.clear(); //xoá toàn bộ dữ liệu trong giỏ hàng\n        this.saveCartToLocalStorage(); // lưu giỏ hàng vào localStorage trống\n    }\n}"],"mappings":""},"metadata":{},"sourceType":"module","externalDependencies":[]}