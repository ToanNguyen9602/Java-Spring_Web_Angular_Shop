{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from \"@angular/core\";\nimport { environment } from \"src/app/environments/environment\";\nexport let DetailProductComponent = class DetailProductComponent {\n  constructor(productService,\n  // private categoryService: CategoryService, // private router: Router, // private activatedRoute: ActivatedRoute\n  cartService, router, activatedRoute = A) {\n    this.productService = productService;\n    this.cartService = cartService;\n    this.router = router;\n    this.activatedRoute = activatedRoute;\n    this.productId = 0;\n    this.currentImageIndex = 0;\n    this.quantity = 1;\n  }\n  ngOnInit() {\n    //lấy productId từ URL\n    // debugger;\n    // this.cartService.clearCart();\n    const idParam = this.activatedRoute.snapshot.paramMap.get('id');\n    if (idParam !== null) {\n      this.productId = +idParam;\n    }\n    if (!isNaN(this.productId)) {\n      this.productService.getDetailProduct(this.productId).subscribe({\n        next: response => {\n          // debugger;\n          //Lấy danh sách sản phẩm và thay đổi URL\n          if (response.product_images && response.product_images.length > 0) {\n            response.product_images.forEach(product_image => {\n              product_image.image_url = `${environment.apiBaseUrl}/products/images/${product_image.image_url}`;\n              // debugger;\n            });\n          }\n          // debugger;\n          this.product = response;\n          //bắt đầu với ảnh đầu tiên\n          this.showImage(0);\n        },\n        complete: () => {\n          // debugger;\n        },\n        error: error => {\n          // debugger;\n          console.error(\"Error fetching detail: \", error);\n        }\n      });\n    } else {\n      console.error(\"Invalid productId:\", idParam);\n    }\n  }\n  showImage(index) {\n    // debugger;\n    if (this.product && this.product.product_images && this.product.product_images.length > 0) {\n      //check index validate (nằm trong khoảng hợp lệ)\n      if (index < 0) {\n        index = 0;\n      } else if (index >= this.product.product_images.length) {\n        index = this.product.product_images.length - 1;\n      }\n      //Gán index hiện tại và cập nhật ảnh hiển thị\n      this.currentImageIndex = index;\n    }\n  }\n  thumbnailClick(index) {\n    //gọi thumbail để xem\n    this.currentImageIndex = index;\n  }\n  nextImage() {\n    this.showImage(this.currentImageIndex + 1);\n  }\n  previousImage() {\n    this.showImage(this.currentImageIndex - 1);\n  }\n  addToCart() {\n    // debugger;\n    if (this.product) {\n      this.cartService.addToCart(this.product.id, this.quantity);\n    } else {\n      console.error(\"Cannot add this item to cart. Product is null\");\n    }\n  }\n  increaseQuantity() {\n    this.quantity++;\n  }\n  decreaseQuantity() {\n    if (this.quantity > 1) {\n      this.quantity--;\n    }\n  }\n  buyNow() {\n    this.router.navigate(['/orders']);\n  }\n};\nDetailProductComponent = __decorate([Component({\n  selector: \"app-detail-product\",\n  templateUrl: \"./detail-product.component.html\",\n  styleUrls: [\"./detail-product.component.scss\"]\n})], DetailProductComponent);","map":{"version":3,"names":["Component","environment","DetailProductComponent","constructor","productService","cartService","router","activatedRoute","A","productId","currentImageIndex","quantity","ngOnInit","idParam","snapshot","paramMap","get","isNaN","getDetailProduct","subscribe","next","response","product_images","length","forEach","product_image","image_url","apiBaseUrl","product","showImage","complete","error","console","index","thumbnailClick","nextImage","previousImage","addToCart","id","increaseQuantity","decreaseQuantity","buyNow","navigate","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\Admin\\Desktop\\ShopApp\\Java-Spring_Web_Angular_Shop\\FrontEnd\\src\\app\\components\\detail-product\\detail-product.component.ts"],"sourcesContent":["import { CartService } from \"./../../service/cart.service\";\r\nimport { Component, OnInit } from \"@angular/core\";\r\nimport { ActivatedRoute, Router } from \"@angular/router\";\r\nimport { Product } from \"src/app/models/product\";\r\nimport { ProductImage } from \"src/app/models/product.image\";\r\nimport { environment } from \"src/app/environments/environment\";\r\nimport { CategoryService } from \"src/app/service/category.service\";\r\nimport { ProductService } from \"src/app/service/product.service\";\r\n\r\n@Component({\r\n  selector: \"app-detail-product\",\r\n  templateUrl: \"./detail-product.component.html\",\r\n  styleUrls: [\"./detail-product.component.scss\"],\r\n})\r\nexport class DetailProductComponent implements OnInit {\r\n  product?: Product;\r\n  productId: number = 0;\r\n  currentImageIndex: number = 0;\r\n  quantity: number = 1;\r\n  constructor(\r\n    private productService: ProductService, // private categoryService: CategoryService, // private router: Router, // private activatedRoute: ActivatedRoute\r\n    private cartService: CartService,\r\n    private router: Router,\r\n    private activatedRoute = A\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    //lấy productId từ URL\r\n    // debugger;\r\n    // this.cartService.clearCart();\r\n    const idParam = this.activatedRoute.snapshot.paramMap.get('id');\r\n    if (idParam !== null) {\r\n      this.productId = +idParam;\r\n    }\r\n    if (!isNaN(this.productId)) {\r\n      this.productService.getDetailProduct(this.productId).subscribe({\r\n        next: (response: any) => {\r\n          // debugger;\r\n          //Lấy danh sách sản phẩm và thay đổi URL\r\n          if (response.product_images && response.product_images.length > 0) {\r\n            response.product_images.forEach((product_image: ProductImage) => {\r\n              product_image.image_url = `${environment.apiBaseUrl}/products/images/${product_image.image_url}`;\r\n              // debugger;\r\n            });\r\n          }\r\n          // debugger;\r\n          this.product = response;\r\n          //bắt đầu với ảnh đầu tiên\r\n          this.showImage(0);\r\n        },\r\n        complete: () => {\r\n          // debugger;\r\n        },\r\n        error: (error: any) => {\r\n          // debugger;\r\n          console.error(\"Error fetching detail: \", error);\r\n        },\r\n      });\r\n    } else {\r\n      console.error(\"Invalid productId:\", idParam);\r\n    }\r\n  }\r\n\r\n  showImage(index: number): void {\r\n    // debugger;\r\n    if (\r\n      this.product &&\r\n      this.product.product_images &&\r\n      this.product.product_images.length > 0\r\n    ) {\r\n      //check index validate (nằm trong khoảng hợp lệ)\r\n      if (index < 0) {\r\n        index = 0;\r\n      } else if (index >= this.product.product_images.length) {\r\n        index = this.product.product_images.length - 1;\r\n      }\r\n      //Gán index hiện tại và cập nhật ảnh hiển thị\r\n      this.currentImageIndex = index;\r\n    }\r\n  }\r\n  thumbnailClick(index: number) {\r\n    //gọi thumbail để xem\r\n    this.currentImageIndex = index;\r\n  }\r\n  nextImage(): void {\r\n    this.showImage(this.currentImageIndex + 1);\r\n  }\r\n  previousImage(): void {\r\n    this.showImage(this.currentImageIndex - 1);\r\n  }\r\n  addToCart(): void {\r\n    // debugger;\r\n    if (this.product) {\r\n      this.cartService.addToCart(this.product.id, this.quantity);\r\n    } else {\r\n      console.error(\"Cannot add this item to cart. Product is null\");\r\n    }\r\n  }\r\n  increaseQuantity(): void {\r\n    this.quantity++;\r\n  }\r\n  decreaseQuantity(): void {\r\n    if (this.quantity > 1) {\r\n      this.quantity--;\r\n    }\r\n  }\r\n  buyNow(): void {      \r\n    this.router.navigate(['/orders']);\r\n  }   \r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}