{"ast":null,"code":"import { Validators } from \"@angular/forms\";\nimport { environment } from \"src/app/environments/environment\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/cart.service\";\nimport * as i2 from \"src/app/service/product.service\";\nimport * as i3 from \"src/app/service/order.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"src/app/service/token.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"../header/header.component\";\nimport * as i8 from \"../footer/footer.component\";\nfunction OrderComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtext(1, \" H\\u1ECD v\\u00E0 t\\u00EAn l\\u00E0 tr\\u01B0\\u1EDDng b\\u1EAFt bu\\u1ED9c \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OrderComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.orderForm.get(\"email\").hasError(\"email\") ? \"Email kh\\u00F4ng h\\u1EE3p l\\u1EC7\" : \"Email l\\u00E0 tr\\u01B0\\u1EDDng h\\u1EE3p b\\u1EAFt bu\\u1ED9c\", \" \");\n  }\n}\nfunction OrderComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtext(1, \" S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i l\\u00E0 tr\\u01B0\\u1EDDng b\\u1EAFt bu\\u1ED9c v\\u00E0 \\u00EDt nh\\u1EA5t 6 k\\u00FD t\\u1EF1. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OrderComponent_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtext(1, \" \\u0110\\u1ECBa ch\\u1EC9 l\\u00E0 tr\\u01B0\\u1EDDng b\\u1EAFt bu\\u1ED9c v\\u00E0 \\u00EDt nh\\u1EA5t 5 k\\u00FD t\\u1EF1. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OrderComponent_ng_container_67_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"tr\")(2, \"td\")(3, \"div\", 38);\n    i0.ɵɵelement(4, \"img\", 39);\n    i0.ɵɵelementStart(5, \"span\", 40);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", item_r5.product.thumbnail, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r5.product.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r5.quantity);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r5.product.price);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(13, 5, item_r5.product.price * item_r5.quantity, \"1.2-2\"), \" \");\n  }\n}\nexport class OrderComponent {\n  constructor(cartService, productService, orderService, formBuilder, tokenService) {\n    this.cartService = cartService;\n    this.productService = productService;\n    this.orderService = orderService;\n    this.formBuilder = formBuilder;\n    this.tokenService = tokenService;\n    this.cartItems = [];\n    this.couponCode = \"\";\n    this.totalAmount = 0;\n    this.orderData = {\n      userId: 1,\n      // fullname: '',  Khởi tạo rỗng, sẽ được điền từ form\n      email: \"\",\n      phone_number: \"\",\n      address: \"\",\n      note: \"\",\n      total_money: 0,\n      payment_method: \"cod\",\n      shipping_method: \"express\",\n      coupon_code: \"\",\n      cart_items: [],\n      fullname: \"\"\n    };\n    this.orderForm = this.formBuilder.group({\n      fullname: [\"\", Validators.required],\n      email: [\"\", [Validators.email]],\n      phone_number: [\"\", [Validators.required, Validators.minLength(6)]],\n      address: [\"\", [Validators.required, Validators.minLength(5)]],\n      note: [\"\"],\n      shipping_method: [\"\"],\n      payment_method: [\"\"]\n    });\n  }\n  ngOnInit() {\n    debugger;\n    // Lấy danh sách sản phẩm từ giỏ hàng\n    const cart = this.cartService.getCart();\n    // Chuyển danh sách ID từ Map giỏ hàng\n    const productIds = Array.from(cart.keys());\n    debugger;\n    //get info detail product by list productIds\n    this.productService.getProductsByIds(productIds).subscribe({\n      next: products => {\n        debugger;\n        this.cartItems = productIds.map(productId => {\n          debugger;\n          const product = products.find(p => p.id === productId);\n          if (product) {\n            product.thumbnail = `${environment.apiBaseUrl}/products/images/${product.thumbnail}`;\n          }\n          return {\n            product: product,\n            quantity: cart.get(productId)\n          };\n        });\n        console.log(\"done\");\n      },\n      complete: () => {\n        debugger;\n        this.calculateTotal();\n      },\n      error: error => {\n        debugger;\n        console.error(\"Error fetching detail: \", error);\n      }\n    });\n  }\n  placeOrder() {\n    debugger;\n    if (this.orderForm.valid) {\n      // this.orderData.fullname = this.orderForm.get('fullname')!.value;\n      // this.orderData.email = this.orderForm.get('email')!.value;\n      // this.orderData.phone_number = this.orderForm.get('phone_number')!.value;\n      // this.orderData.address = this.orderForm.get('address')!.value;\n      // this.orderData.note = this.orderForm.get('note')!.value;\n      // this.orderData.shipping_method = this.orderForm.get('shipping_method')!.value;\n      // this.orderData.payment_method = this.orderForm.get('payment_method')!.value;\n      this.orderData = {\n        ...this.orderData,\n        ...this.orderForm.value\n      };\n      this.orderData.cart_items = this.cartItems.map(cartItem => ({\n        product_id: cartItem.product.id,\n        quantity: cartItem.quantity\n      }));\n    }\n    //dữ liệu hợp lệ, gửi order đi\n    this.orderService.placeOrder(this.orderData).subscribe({\n      next: response => {\n        debugger;\n        console.log(\"Đặt hàng thành công\");\n      },\n      complete: () => {\n        debugger;\n        this.calculateTotal();\n      },\n      error: error => {\n        debugger;\n        console.error(\"Lỗi khi đặt hàng: \", error);\n      }\n    });\n  }\n  calculateTotal() {\n    this.totalAmount = this.cartItems.reduce((total, item) => total + item.product.price * item.quantity, 0);\n  }\n  // Hàm xử lý việc áp dụng mã giảm giá\n  applyCoupon() {\n    // Viết mã xử lý áp dụng mã giảm giá ở đây\n    // Cập nhật giá trị totalAmount dựa trên mã giảm giá nếu áp dụng\n  }\n  static #_ = this.ɵfac = function OrderComponent_Factory(t) {\n    return new (t || OrderComponent)(i0.ɵɵdirectiveInject(i1.CartService), i0.ɵɵdirectiveInject(i2.ProductService), i0.ɵɵdirectiveInject(i3.OrderService), i0.ɵɵdirectiveInject(i4.FormBuilder), i0.ɵɵdirectiveInject(i5.TokenService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OrderComponent,\n    selectors: [[\"app-order\"]],\n    decls: 82,\n    vars: 15,\n    consts: [[1, \"container\"], [1, \"intro-section\"], [3, \"formGroup\"], [1, \"row\"], [1, \"col-md-6\"], [1, \"product-header\"], [1, \"mb-3\"], [\"for\", \"fullname\", 1, \"form-label\"], [\"type\", \"text\", \"formControlName\", \"fullname\", \"id\", \"fullname\", 1, \"form-control\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [\"for\", \"email\", 1, \"form-label\"], [\"type\", \"text\", \"formControlName\", \"email\", \"id\", \"email\", 1, \"form-control\"], [\"for\", \"phone\", 1, \"form-label\"], [\"type\", \"text\", \"formControlName\", \"phone_number\", \"placeholder\", \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\", \"required\", \"\", \"id\", \"phone\", 1, \"form-control\"], [\"for\", \"address\", 1, \"form-label\"], [\"type\", \"text\", \"formControlName\", \"address\", \"placeholder\", \"\\u0110\\u1ECBa ch\\u1EC9\", \"required\", \"\", \"id\", \"address\", 1, \"form-control\"], [\"for\", \"note\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"note\", \"formControlName\", \"note\", \"placeholder\", \"Ghi ch\\u00FA\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"shippingMethod\"], [\"id\", \"shippingMethod\", \"formControlName\", \"shipping_method\", 1, \"form-control\"], [\"value\", \"express\"], [\"value\", \"normal\"], [\"for\", \"paymentMethod\"], [\"id\", \"paymentMethod\", \"formControlName\", \"payment_method\", 1, \"form-control\"], [\"value\", \"cod\"], [\"value\", \"other\"], [1, \"product-order\"], [\"scope\", \"col\", 1, \"text-start\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [1, \"text-start\", \"mt-3\"], [1, \"header-text\", \"text-end\"], [1, \"mt-3\"], [1, \"input-group\"], [\"type\", \"text\", \"placeholder\", \"Nh\\u1EADp coupon\", 1, \"form-control\"], [\"type\", \"button\", 1, \"btn\", \"btn-gradient\"], [\"type\", \"button\", 1, \"btn\", \"btn-gradient\", 3, \"click\"], [1, \"invalid-feedback\"], [1, \"product-info\"], [\"alt\", \"Product Image\", 1, \"product-image\", 3, \"src\"], [1, \"product-name\"]],\n    template: function OrderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-header\");\n        i0.ɵɵelementStart(1, \"div\", 0)(2, \"div\", 1)(3, \"h1\");\n        i0.ɵɵtext(4, \"\\u0110\\u00E2y l\\u00E0 trang order\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"p\");\n        i0.ɵɵtext(6, \"S\\u1EED d\\u1EE5ng Bootstrap\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"form\", 2)(8, \"div\", 3)(9, \"div\", 4)(10, \"h2\", 5);\n        i0.ɵɵtext(11, \"Th\\u00F4ng tin ng\\u01B0\\u1EDDi nh\\u1EADn\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 6)(13, \"label\", 7);\n        i0.ɵɵtext(14, \"H\\u1ECD v\\u00E0 t\\u00EAn\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"input\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(16, OrderComponent_div_16_Template, 2, 0, \"div\", 9);\n        i0.ɵɵelementStart(17, \"div\", 6)(18, \"label\", 10);\n        i0.ɵɵtext(19, \"Email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(20, \"input\", 11);\n        i0.ɵɵtemplate(21, OrderComponent_div_21_Template, 2, 1, \"div\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"div\", 6)(23, \"label\", 12);\n        i0.ɵɵtext(24, \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(25, \"input\", 13);\n        i0.ɵɵtemplate(26, OrderComponent_div_26_Template, 2, 0, \"div\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"div\", 6)(28, \"label\", 14);\n        i0.ɵɵtext(29, \"\\u0110\\u1ECBa ch\\u1EC9\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(30, \"input\", 15);\n        i0.ɵɵtemplate(31, OrderComponent_div_31_Template, 2, 0, \"div\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"div\", 6)(33, \"label\", 16);\n        i0.ɵɵtext(34, \"Ghi ch\\u00FA\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(35, \"input\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"div\", 6)(37, \"label\", 18);\n        i0.ɵɵtext(38, \"Ph\\u01B0\\u01A1ng th\\u1EE9c v\\u1EADn chuy\\u1EC3n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"select\", 19)(40, \"option\", 20);\n        i0.ɵɵtext(41, \"Nhanh (Express)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(42, \"option\", 21);\n        i0.ɵɵtext(43, \"Th\\u01B0\\u1EDDng (Normal)\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(44, \"div\", 6)(45, \"label\", 22);\n        i0.ɵɵtext(46, \"Ph\\u01B0\\u01A1ng th\\u1EE9c thanh to\\u00E1n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(47, \"select\", 23)(48, \"option\", 24);\n        i0.ɵɵtext(49, \"Thanh to\\u00E1n khi nh\\u1EADn h\\u00E0ng (COD)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(50, \"option\", 25);\n        i0.ɵɵtext(51, \"Thanh to\\u00E1n kh\\u00E1c\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(52, \"div\", 4)(53, \"h2\", 26);\n        i0.ɵɵtext(54, \"S\\u1EA3n ph\\u1EA9m \\u0111\\u00E3 \\u0111\\u1EB7t h\\u00E0ng\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(55, \"table\")(56, \"thead\")(57, \"tr\")(58, \"th\", 27);\n        i0.ɵɵtext(59, \"S\\u1EA3n ph\\u1EA9m\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(60, \"th\", 28);\n        i0.ɵɵtext(61, \"S\\u1ED1 l\\u01B0\\u1EE3ng\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(62, \"th\", 28);\n        i0.ɵɵtext(63, \"\\u0110\\u01A1n gi\\u00E1\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(64, \"th\", 28);\n        i0.ɵɵtext(65, \"T\\u1ED5ng gi\\u00E1\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(66, \"tbody\");\n        i0.ɵɵtemplate(67, OrderComponent_ng_container_67_Template, 14, 8, \"ng-container\", 29);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(68, \"div\", 30)(69, \"h4\", 31);\n        i0.ɵɵtext(70);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(71, \"div\", 32)(72, \"h4\", 5);\n        i0.ɵɵtext(73, \"Nh\\u1EADp coupon\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(74, \"div\", 33);\n        i0.ɵɵelement(75, \"input\", 34);\n        i0.ɵɵelementStart(76, \"button\", 35);\n        i0.ɵɵtext(77, \"\\u00C1p d\\u1EE5ng\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(78, \"div\", 30)(79, \"button\", 36);\n        i0.ɵɵlistener(\"click\", function OrderComponent_Template_button_click_79_listener() {\n          return ctx.placeOrder();\n        });\n        i0.ɵɵtext(80, \" \\u0110\\u1EB7t h\\u00E0ng \");\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelement(81, \"app-footer\");\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"formGroup\", ctx.orderForm);\n        i0.ɵɵadvance(8);\n        i0.ɵɵclassProp(\"is-invalid\", ctx.orderForm.get(\"fullname\").invalid && ctx.orderForm.get(\"fullname\").touched);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.orderForm.get(\"fullname\").invalid && ctx.orderForm.get(\"fullname\").touched);\n        i0.ɵɵadvance(4);\n        i0.ɵɵclassProp(\"is-invalid\", ctx.orderForm.get(\"email\").invalid && ctx.orderForm.get(\"email\").touched);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.orderForm.get(\"email\").invalid && ctx.orderForm.get(\"email\").touched);\n        i0.ɵɵadvance(4);\n        i0.ɵɵclassProp(\"is-invalid\", ctx.orderForm.get(\"phone_number\").invalid && ctx.orderForm.get(\"phone_number\").touched);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.orderForm.get(\"phone_number\").invalid && ctx.orderForm.get(\"phone_number\").touched);\n        i0.ɵɵadvance(4);\n        i0.ɵɵclassProp(\"is-invalid\", ctx.orderForm.get(\"address\").invalid && ctx.orderForm.get(\"address\").touched);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.orderForm.get(\"address\").invalid && ctx.orderForm.get(\"address\").touched);\n        i0.ɵɵadvance(36);\n        i0.ɵɵproperty(\"ngForOf\", ctx.cartItems);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"T\\u1ED5ng gi\\u00E1: \", ctx.totalAmount, \"\");\n      }\n    },\n    dependencies: [i6.NgForOf, i6.NgIf, i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.FormGroupDirective, i4.FormControlName, i7.HeaderComponent, i8.FooterComponent, i6.DecimalPipe],\n    styles: [\".container[_ngcontent-%COMP%] {\\n  color: white;\\n}\\n\\n.intro-section[_ngcontent-%COMP%] {\\n  color: white;\\n  padding: 20px;\\n  text-align: center;\\n}\\n\\n.product-header[_ngcontent-%COMP%] {\\n  color: rgb(233, 66, 176);\\n}\\n\\n.form-control[_ngcontent-%COMP%] {\\n  background: rgb(19, 23, 42);\\n  border: 1px solid rgb(29, 33, 54);\\n  color: white;\\n}\\n\\n.form-control[_ngcontent-%COMP%]:focus {\\n  border-color: white;\\n  background-color: rgb(19, 23, 42);\\n}\\n\\n.form-label[_ngcontent-%COMP%] {\\n  color: white;\\n}\\n\\n.product-order[_ngcontent-%COMP%] {\\n  color: rgb(105, 244, 181);\\n}\\n\\ntable[_ngcontent-%COMP%] {\\n  width: 100%;\\n  border-radius: 10px;\\n  border: none;\\n  border-collapse: separate;\\n  border: 1px solid white;\\n  border-spacing: 0;\\n  background-color: rgb(12, 13, 54);\\n}\\n\\nth[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\\n  padding: 10px;\\n  text-align: center;\\n}\\n\\n.product-info[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.product-image[_ngcontent-%COMP%] {\\n  width: 100px;\\n  height: 100px;\\n  border-radius: 5px;\\n  margin-right: 10px;\\n}\\n\\n.product-name[_ngcontent-%COMP%] {\\n  color: white;\\n  margin-right: 10px;\\n}\\n\\n.btn-gradient[_ngcontent-%COMP%] {\\n  background: linear-gradient(to right, rgb(255, 64, 180), rgb(126, 43, 237));\\n  color: white;\\n  border-radius: 30px;\\n  width: 200px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9vcmRlci9vcmRlci5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLFlBQUE7QUFDSjs7QUFDQTtFQUNJLFlBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7QUFFSjs7QUFBQTtFQUNJLHdCQUFBO0FBR0o7O0FBREE7RUFDSSwyQkFBQTtFQUNBLGlDQUFBO0VBQ0EsWUFBQTtBQUlKOztBQUZBO0VBQ0ksbUJBQUE7RUFDQSxpQ0FBQTtBQUtKOztBQUhBO0VBQ0ksWUFBQTtBQU1KOztBQUpBO0VBQ0kseUJBQUE7QUFPSjs7QUFMQTtFQUNJLFdBQUE7RUFDQSxtQkFBQTtFQUNBLFlBQUE7RUFDQSx5QkFBQTtFQUNBLHVCQUFBO0VBQ0EsaUJBQUE7RUFDQSxpQ0FBQTtBQVFKOztBQUxBO0VBQ0ksYUFBQTtFQUNBLGtCQUFBO0FBUUo7O0FBTkE7RUFDSSxhQUFBO0VBQ0EsbUJBQUE7QUFTSjs7QUFQQTtFQUNJLFlBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7RUFDQSxrQkFBQTtBQVVKOztBQVJBO0VBQ0ksWUFBQTtFQUNBLGtCQUFBO0FBV0o7O0FBVEE7RUFDSSwyRUFBQTtFQUNBLFlBQUE7RUFDQSxtQkFBQTtFQUNBLFlBQUE7QUFZSiIsInNvdXJjZXNDb250ZW50IjpbIi5jb250YWluZXIge1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG59XHJcbi5pbnRyby1zZWN0aW9uIHtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIHBhZGRpbmc6IDIwcHg7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuLnByb2R1Y3QtaGVhZGVyIHtcclxuICAgIGNvbG9yOiByZ2IoMjMzLCA2NiwgMTc2KTtcclxufVxyXG4uZm9ybS1jb250cm9sIHtcclxuICAgIGJhY2tncm91bmQ6IHJnYigxOSwgMjMsIDQyKTtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYigyOSwgMzMsIDU0KTtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxufVxyXG4uZm9ybS1jb250cm9sOmZvY3VzIHtcclxuICAgIGJvcmRlci1jb2xvcjogd2hpdGU7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTksIDIzLCA0Mik7XHJcbn1cclxuLmZvcm0tbGFiZWwge1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG59XHJcbi5wcm9kdWN0LW9yZGVyIHtcclxuICAgIGNvbG9yOiByZ2IoMTA1LCAyNDQsIDE4MSk7XHJcbn1cclxudGFibGUge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgYm9yZGVyLWNvbGxhcHNlOiBzZXBhcmF0ZTtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkIHdoaXRlO1xyXG4gICAgYm9yZGVyLXNwYWNpbmc6IDA7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTIsIDEzLCA1NCk7XHJcbn1cclxuXHJcbnRoLCB0ZCB7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcbi5wcm9kdWN0LWluZm8ge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbn1cclxuLnByb2R1Y3QtaW1hZ2Uge1xyXG4gICAgd2lkdGg6IDEwMHB4O1xyXG4gICAgaGVpZ2h0OiAxMDBweDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgIG1hcmdpbi1yaWdodDogMTBweDtcclxufVxyXG4ucHJvZHVjdC1uYW1lIHtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIG1hcmdpbi1yaWdodDogMTBweDtcclxufVxyXG4uYnRuLWdyYWRpZW50IHtcclxuICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgcmdiKDI1NSwgNjQsIDE4MCksIHJnYigxMjYsIDQzLCAyMzcpKTtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDMwcHg7XHJcbiAgICB3aWR0aDogMjAwcHg7XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"names":["Validators","environment","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r1","orderForm","get","hasError","ɵɵelementContainerStart","ɵɵelement","ɵɵelementContainerEnd","ɵɵproperty","item_r5","product","thumbnail","ɵɵsanitizeUrl","ɵɵtextInterpolate","name","quantity","price","ɵɵpipeBind2","OrderComponent","constructor","cartService","productService","orderService","formBuilder","tokenService","cartItems","couponCode","totalAmount","orderData","userId","email","phone_number","address","note","total_money","payment_method","shipping_method","coupon_code","cart_items","fullname","group","required","minLength","ngOnInit","cart","getCart","productIds","Array","from","keys","getProductsByIds","subscribe","next","products","map","productId","find","p","id","apiBaseUrl","console","log","complete","calculateTotal","error","placeOrder","valid","value","cartItem","product_id","response","reduce","total","item","applyCoupon","_","ɵɵdirectiveInject","i1","CartService","i2","ProductService","i3","OrderService","i4","FormBuilder","i5","TokenService","_2","selectors","decls","vars","consts","template","OrderComponent_Template","rf","ctx","ɵɵtemplate","OrderComponent_div_16_Template","OrderComponent_div_21_Template","OrderComponent_div_26_Template","OrderComponent_div_31_Template","OrderComponent_ng_container_67_Template","ɵɵlistener","OrderComponent_Template_button_click_79_listener","ɵɵclassProp","invalid","touched"],"sources":["C:\\Users\\Admin\\Desktop\\ShopApp\\Java-Spring_Web_Angular_Shop\\FrontEnd\\src\\app\\components\\order\\order.component.ts","C:\\Users\\Admin\\Desktop\\ShopApp\\Java-Spring_Web_Angular_Shop\\FrontEnd\\src\\app\\components\\order\\order.component.html"],"sourcesContent":["import { Component, OnInit } from \"@angular/core\";\r\nimport { FormBuilder, FormGroup, Validators } from \"@angular/forms\";\r\nimport { OrderDTO } from \"src/app/dtos/order/order.dto\";\r\nimport { environment } from \"src/app/environments/environment\";\r\nimport { Product } from \"src/app/models/product\";\r\nimport { CartService } from \"src/app/service/cart.service\";\r\nimport { OrderService } from \"src/app/service/order.service\";\r\nimport { ProductService } from \"src/app/service/product.service\";\r\nimport { TokenService } from \"src/app/service/token.service\";\r\n\r\n@Component({\r\n  selector: \"app-order\",\r\n  templateUrl: \"./order.component.html\",\r\n  styleUrls: [\"./order.component.scss\"],\r\n})\r\nexport class OrderComponent implements OnInit {\r\n  orderForm: FormGroup;\r\n  cartItems: { product: Product; quantity: number }[] = [];\r\n  couponCode: string = \"\";\r\n  totalAmount: number = 0;\r\n  orderData: OrderDTO = {\r\n    userId: 1,\r\n    // fullname: '',  Khởi tạo rỗng, sẽ được điền từ form\r\n    email: \"\",\r\n    phone_number: \"\",\r\n    address: \"\",\r\n    note: \"\",\r\n    total_money: 0,\r\n    payment_method: \"cod\",\r\n    shipping_method: \"express\",\r\n    coupon_code: \"\",\r\n    cart_items: [],\r\n    fullname: \"\",\r\n  };\r\n  constructor(\r\n    private cartService: CartService,\r\n    private productService: ProductService,\r\n    private orderService: OrderService,\r\n    private formBuilder: FormBuilder,\r\n    private tokenService: TokenService\r\n  ) {\r\n    this.orderForm = this.formBuilder.group({\r\n      fullname: [\"\", Validators.required],\r\n      email: [\"\", [Validators.email]],\r\n      phone_number: [\"\", [Validators.required, Validators.minLength(6)]],\r\n      address: [\"\", [Validators.required, Validators.minLength(5)]],\r\n      note: [\"\"],\r\n      shipping_method: [\"\"],\r\n      payment_method: [\"\"],\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    debugger;\r\n    // Lấy danh sách sản phẩm từ giỏ hàng\r\n    const cart = this.cartService.getCart();\r\n    // Chuyển danh sách ID từ Map giỏ hàng\r\n    const productIds = Array.from(cart.keys());\r\n    debugger;\r\n    //get info detail product by list productIds\r\n    this.productService.getProductsByIds(productIds).subscribe({\r\n      next: (products) => {\r\n        debugger;\r\n        this.cartItems = productIds.map((productId) => {\r\n          debugger;\r\n          const product = products.find((p) => p.id === productId);\r\n          if (product) {\r\n            product.thumbnail = `${environment.apiBaseUrl}/products/images/${product.thumbnail}`;\r\n          }\r\n          return {\r\n            product: product!,\r\n            quantity: cart.get(productId)!,\r\n          };\r\n        });\r\n        console.log(\"done\");\r\n      },\r\n      complete: () => {\r\n        debugger;\r\n        this.calculateTotal();\r\n      },\r\n      error: (error: any) => {\r\n        debugger;\r\n        console.error(\"Error fetching detail: \", error);\r\n      },\r\n    });\r\n  }\r\n\r\n  placeOrder() {\r\n    debugger;\r\n    if (this.orderForm.valid) {\r\n      // this.orderData.fullname = this.orderForm.get('fullname')!.value;\r\n      // this.orderData.email = this.orderForm.get('email')!.value;\r\n      // this.orderData.phone_number = this.orderForm.get('phone_number')!.value;\r\n      // this.orderData.address = this.orderForm.get('address')!.value;\r\n      // this.orderData.note = this.orderForm.get('note')!.value;\r\n      // this.orderData.shipping_method = this.orderForm.get('shipping_method')!.value;\r\n      // this.orderData.payment_method = this.orderForm.get('payment_method')!.value;\r\n\r\n      this.orderData = {\r\n        ...this.orderData,\r\n        ...this.orderForm.value,\r\n      };\r\n      this.orderData.cart_items = this.cartItems.map((cartItem) => ({\r\n        product_id: cartItem.product.id,\r\n        quantity: cartItem.quantity,\r\n      }));\r\n    }\r\n    //dữ liệu hợp lệ, gửi order đi\r\n    this.orderService.placeOrder(this.orderData).subscribe({\r\n      next: (response:Or) => {\r\n        debugger;\r\n        console.log(\"Đặt hàng thành công\");\r\n      },\r\n      complete: () => {\r\n        debugger;\r\n        this.calculateTotal();\r\n      },\r\n      error: (error: any) => {\r\n        debugger;\r\n        console.error(\"Lỗi khi đặt hàng: \", error);\r\n      },\r\n    });\r\n  }\r\n\r\n  calculateTotal(): void {\r\n    this.totalAmount = this.cartItems.reduce(\r\n      (total, item) => total + item.product.price * item.quantity,\r\n      0\r\n    );\r\n  }\r\n\r\n  // Hàm xử lý việc áp dụng mã giảm giá\r\n  applyCoupon(): void {\r\n    // Viết mã xử lý áp dụng mã giảm giá ở đây\r\n    // Cập nhật giá trị totalAmount dựa trên mã giảm giá nếu áp dụng\r\n  }\r\n}\r\n","<app-header></app-header>\r\n<div class=\"container\">\r\n  <div class=\"intro-section\">\r\n    <h1>Đây là trang order</h1>\r\n    <p>Sử dụng Bootstrap</p>\r\n  </div>\r\n  <form [formGroup]=\"orderForm\">\r\n    <div class=\"row\">\r\n      <div class=\"col-md-6\">\r\n        <h2 class=\"product-header\">Thông tin người nhận</h2>\r\n        <div class=\"mb-3\">\r\n          <label for=\"fullname\" class=\"form-label\">Họ và tên</label>\r\n          <input\r\n            type=\"text\"\r\n            formControlName=\"fullname\"\r\n            class=\"form-control\"\r\n            id=\"fullname\"\r\n            [class.is-invalid]=\"\r\n              orderForm.get('fullname')!.invalid &&\r\n              orderForm.get('fullname')!.touched\r\n            \"\r\n          />\r\n        </div>\r\n        <div\r\n          *ngIf=\"\r\n            orderForm.get('fullname')!.invalid &&\r\n            orderForm.get('fullname')!.touched\r\n          \"\r\n          class=\"invalid-feedback\"\r\n        >\r\n          Họ và tên là trường bắt buộc\r\n        </div>\r\n        <div class=\"mb-3\">\r\n          <label for=\"email\" class=\"form-label\">Email</label>\r\n          <input\r\n            type=\"text\"\r\n            formControlName=\"email\"\r\n            class=\"form-control\"\r\n            id=\"email\"\r\n            [class.is-invalid]=\"\r\n              orderForm.get('email')!.invalid && orderForm.get('email')!.touched\r\n            \"\r\n          />\r\n          <div\r\n            *ngIf=\"\r\n              orderForm.get('email')!.invalid && orderForm.get('email')!.touched\r\n            \"\r\n            class=\"invalid-feedback\"\r\n          >\r\n            {{\r\n              orderForm.get(\"email\")!.hasError(\"email\")\r\n                ? \"Email không hợp lệ\"\r\n                : \"Email là trường hợp bắt buộc\"\r\n            }}\r\n          </div>\r\n        </div>\r\n        <div class=\"mb-3\">\r\n          <label for=\"phone\" class=\"form-label\">Số điện thoại</label>\r\n          <input\r\n            type=\"text\"\r\n            formControlName=\"phone_number\"\r\n            placeholder=\"Số điện thoại\"\r\n            required\r\n            class=\"form-control\"\r\n            id=\"phone\"\r\n            [class.is-invalid]=\"\r\n              orderForm.get('phone_number')!.invalid &&\r\n              orderForm.get('phone_number')!.touched\r\n            \"\r\n          />\r\n          <div\r\n            *ngIf=\"\r\n              orderForm.get('phone_number')!.invalid &&\r\n              orderForm.get('phone_number')!.touched\r\n            \"\r\n            class=\"invalid-feedback\"\r\n          >\r\n            Số điện thoại là trường bắt buộc và ít nhất 6 ký tự.\r\n          </div>\r\n        </div>\r\n        <div class=\"mb-3\">\r\n          <label for=\"address\" class=\"form-label\">Địa chỉ</label>\r\n          <input\r\n            type=\"text\"\r\n            formControlName=\"address\"\r\n            class=\"form-control\"\r\n            placeholder=\"Địa chỉ\"\r\n            required\r\n            id=\"address\"\r\n            [class.is-invalid]=\"\r\n              orderForm.get('address')!.invalid &&\r\n              orderForm.get('address')!.touched\r\n            \"\r\n          />\r\n          <div\r\n            *ngIf=\"\r\n              orderForm.get('address')!.invalid &&\r\n              orderForm.get('address')!.touched\r\n            \"\r\n            class=\"invalid-feedback\"\r\n          >\r\n            Địa chỉ là trường bắt buộc và ít nhất 5 ký tự.\r\n          </div>\r\n        </div>\r\n        <div class=\"mb-3\">\r\n          <label for=\"note\" class=\"form-label\">Ghi chú</label>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            id=\"note\"\r\n            formControlName=\"note\"\r\n            placeholder=\"Ghi chú\"\r\n            required\r\n          />\r\n        </div>\r\n        <div class=\"mb-3\">\r\n          <label for=\"shippingMethod\">Phương thức vận chuyển</label>\r\n          <select\r\n            class=\"form-control\"\r\n            id=\"shippingMethod\"\r\n            formControlName=\"shipping_method\"\r\n          >\r\n            <option value=\"express\">Nhanh (Express)</option>\r\n            <option value=\"normal\">Thường (Normal)</option>\r\n          </select>\r\n        </div>\r\n        <div class=\"mb-3\">\r\n          <label for=\"paymentMethod\">Phương thức thanh toán</label>\r\n          <select\r\n            class=\"form-control\"\r\n            id=\"paymentMethod\"\r\n            formControlName=\"payment_method\"\r\n          >\r\n            <option value=\"cod\">Thanh toán khi nhận hàng (COD)</option>\r\n            <option value=\"other\">Thanh toán khác</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"col-md-6\">\r\n        <h2 class=\"product-order\">Sản phẩm đã đặt hàng</h2>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th scope=\"col\" class=\"text-start\">Sản phẩm</th>\r\n              <th scope=\"col\">Số lượng</th>\r\n              <th scope=\"col\">Đơn giá</th>\r\n              <th scope=\"col\">Tổng giá</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <ng-container *ngFor=\"let item of cartItems\">\r\n              <tr>\r\n                <td>\r\n                  <div class=\"product-info\">\r\n                    <img\r\n                      [src]=\"item.product.thumbnail\"\r\n                      alt=\"Product Image\"\r\n                      class=\"product-image\"\r\n                    />\r\n                    <span class=\"product-name\">{{ item.product.name }}</span>\r\n                  </div>\r\n                </td>\r\n                <td>{{ item.quantity }}</td>\r\n                <td>{{ item.product.price }}</td>\r\n                <td>\r\n                  {{ item.product.price * item.quantity | number : \"1.2-2\" }}\r\n                </td>\r\n              </tr>\r\n            </ng-container>\r\n          </tbody>\r\n        </table>\r\n        <div class=\"text-start mt-3\">\r\n          <h4 class=\"header-text text-end\">Tổng giá: {{ totalAmount }}</h4>\r\n        </div>\r\n        <div class=\"mt-3\">\r\n          <h4 class=\"product-header\">Nhập coupon</h4>\r\n          <div class=\"input-group\">\r\n            <input type=\"text\" class=\"form-control\" placeholder=\"Nhập coupon\" />\r\n            <button class=\"btn btn-gradient\" type=\"button\">Áp dụng</button>\r\n          </div>\r\n        </div>\r\n        <div class=\"text-start mt-3\">\r\n          <button (click)=\"placeOrder()\" class=\"btn btn-gradient\" type=\"button\">\r\n            Đặt hàng\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</div>\r\n<app-footer></app-footer>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}