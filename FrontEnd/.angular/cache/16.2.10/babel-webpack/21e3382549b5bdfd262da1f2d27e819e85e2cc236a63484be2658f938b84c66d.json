{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from \"@angular/core\";\nimport { environtment } from \"src/app/environments/environment\";\nexport let DetailProductComponent = class DetailProductComponent {\n  constructor(productService // private categoryService: CategoryService, // private router: Router, // private activatedRoute: ActivatedRoute\n  ) {\n    this.productService = productService;\n    this.productId = 0;\n    this.currentImageIndex = 0;\n  }\n  ngOnInit() {\n    //lấy productId từ URL\n    debugger;\n    const idParam = 8;\n    if (idParam !== null) {\n      this.productId = +idParam;\n    }\n    if (!isNaN(this.productId)) {\n      this.productService.getDetailProduct(this.productId).subscribe({\n        next: response => {\n          debugger;\n          //Lấy danh sách sản phẩm và thay đổi URL\n          if (response.product_images && response.product_images.length > 0) {\n            response.product_images.forEach(product_image => {\n              product_image.image_url = `${environtment.apiBaseUrl}/products/images/${product_image.image_url}`;\n            });\n          }\n          debugger;\n          this.product = response;\n          //bắt đầu với ảnh đầu tiên\n          this.showImage(0);\n        },\n        complete: () => {\n          debugger;\n        },\n        error: error => {\n          debugger;\n          console.error(\"Error fetching detail: \", error);\n        }\n      });\n    } else {}\n  }\n  showImage(index) {\n    debugger;\n    if (this.product && this.product.product_images && this.product.product_images.length > 0) {\n      //check index validate (nằm trong khoảng hợp lệ)\n      if (index < 0) {\n        index = 0;\n      } else if (index >= this.product.product_images.length) {\n        index = this.product.product_images.length - 1;\n      }\n      //Gán index hiện tại và cập nhật ảnh hiển thị\n      this.currentImageIndex = index;\n    }\n  }\n  thumbnailClick(index) {\n    debugger;\n    //gọi thumbail để xem\n    this.currentImageIndex = index;\n  }\n  nextImage() {\n    debugger;\n    this.showImage(this.currentImageIndex + 1);\n  }\n  previousImage() {\n    debugger;\n    this.showImage(this.currentImageIndex - 1);\n  }\n};\nDetailProductComponent = __decorate([Component({\n  selector: \"app-detail-product\",\n  templateUrl: \"./detail-product.component.html\",\n  styleUrls: [\"./detail-product.component.scss\"]\n})], DetailProductComponent);","map":{"version":3,"names":["Component","environtment","DetailProductComponent","constructor","productService","productId","currentImageIndex","ngOnInit","idParam","isNaN","getDetailProduct","subscribe","next","response","product_images","length","forEach","product_image","image_url","apiBaseUrl","product","showImage","complete","error","console","index","thumbnailClick","nextImage","previousImage","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\Admin\\Desktop\\ShopApp\\Java-Spring_Web_Angular_Shop\\FrontEnd\\src\\app\\components\\detail-product\\detail-product.component.ts"],"sourcesContent":["import { Component, OnInit } from \"@angular/core\";\r\nimport { ActivatedRoute, Router } from \"@angular/router\";\r\nimport { Product } from \"src/app/models/product\";\r\nimport { ProductImage } from \"src/app/models/product_image\";\r\nimport { environtment } from \"src/app/environments/environment\";\r\nimport { CategoryService } from \"src/app/service/category.service\";\r\nimport { ProductService } from \"src/app/service/product.service\";\r\n\r\n@Component({\r\n  selector: \"app-detail-product\",\r\n  templateUrl: \"./detail-product.component.html\",\r\n  styleUrls: [\"./detail-product.component.scss\"],\r\n})\r\nexport class DetailProductComponent implements OnInit {\r\n  product?: Product;\r\n  productId: number = 0;\r\n  currentImageIndex: number = 0;\r\n  constructor(\r\n    private productService: ProductService // private categoryService: CategoryService, // private router: Router, // private activatedRoute: ActivatedRoute\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    //lấy productId từ URL\r\n    debugger;\r\n    const idParam = 8;\r\n    if (idParam !== null) {\r\n      this.productId = +idParam;\r\n    }\r\n    if (!isNaN(this.productId)) {\r\n      this.productService.getDetailProduct(this.productId).subscribe({\r\n        next: (response: any) => {\r\n          debugger;\r\n          //Lấy danh sách sản phẩm và thay đổi URL\r\n          if (response.product_images && response.product_images.length > 0) {\r\n            response.product_images.forEach((product_image: ProductImage) => {\r\n              product_image.image_url = `${environtment.apiBaseUrl}/products/images/${product_image.image_url}`;\r\n            });\r\n          }\r\n          debugger;\r\n          this.product = response;\r\n          //bắt đầu với ảnh đầu tiên\r\n          this.showImage(0);\r\n        },\r\n        complete: () => {\r\n          debugger;\r\n        },\r\n        error: (error: any) => {\r\n          debugger;\r\n          console.error(\"Error fetching detail: \", error);\r\n        },\r\n      });\r\n    } else {\r\n    }\r\n  }\r\n\r\n  showImage(index: number): void {\r\n    debugger;\r\n    if (\r\n      this.product &&\r\n      this.product.product_images &&\r\n      this.product.product_images.length > 0\r\n    ) {\r\n      //check index validate (nằm trong khoảng hợp lệ)\r\n      if (index < 0) {\r\n        index = 0;\r\n      } else if (index >= this.product.product_images.length) {\r\n        index = this.product.product_images.length - 1;\r\n      }\r\n      //Gán index hiện tại và cập nhật ảnh hiển thị\r\n      this.currentImageIndex = index;\r\n    }\r\n  }\r\n\r\n  thumbnailClick(index: number) {\r\n    debugger;\r\n    //gọi thumbail để xem\r\n    this.currentImageIndex = index;\r\n  }\r\n  nextImage(): void {\r\n    debugger;\r\n    this.showImage(this.currentImageIndex + 1);\r\n  }\r\n\r\n  previousImage(): void {\r\n    debugger;\r\n    this.showImage(this.currentImageIndex - 1);\r\n  }\r\n}\r\n"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAIjD,SAASC,YAAY,QAAQ,kCAAkC;AASxD,WAAMC,sBAAsB,GAA5B,MAAMA,sBAAsB;EAIjCC,YACUC,cAA8B,CAAC;EAAA,E;IAA/B,KAAAA,cAAc,GAAdA,cAAc;IAHxB,KAAAC,SAAS,GAAW,CAAC;IACrB,KAAAC,iBAAiB,GAAW,CAAC;EAG1B;EAEHC,QAAQA,CAAA;IACN;IACA;IACA,MAAMC,OAAO,GAAG,CAAC;IACjB,IAAIA,OAAO,KAAK,IAAI,EAAE;MACpB,IAAI,CAACH,SAAS,GAAG,CAACG,OAAO;;IAE3B,IAAI,CAACC,KAAK,CAAC,IAAI,CAACJ,SAAS,CAAC,EAAE;MAC1B,IAAI,CAACD,cAAc,CAACM,gBAAgB,CAAC,IAAI,CAACL,SAAS,CAAC,CAACM,SAAS,CAAC;QAC7DC,IAAI,EAAGC,QAAa,IAAI;UACtB;UACA;UACA,IAAIA,QAAQ,CAACC,cAAc,IAAID,QAAQ,CAACC,cAAc,CAACC,MAAM,GAAG,CAAC,EAAE;YACjEF,QAAQ,CAACC,cAAc,CAACE,OAAO,CAAEC,aAA2B,IAAI;cAC9DA,aAAa,CAACC,SAAS,GAAG,GAAGjB,YAAY,CAACkB,UAAU,oBAAoBF,aAAa,CAACC,SAAS,EAAE;YACnG,CAAC,CAAC;;UAEJ;UACA,IAAI,CAACE,OAAO,GAAGP,QAAQ;UACvB;UACA,IAAI,CAACQ,SAAS,CAAC,CAAC,CAAC;QACnB,CAAC;QACDC,QAAQ,EAAEA,CAAA,KAAK;UACb;QACF,CAAC;QACDC,KAAK,EAAGA,KAAU,IAAI;UACpB;UACAC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;QACjD;OACD,CAAC;KACH,MAAM,C;EAET;EAEAF,SAASA,CAACI,KAAa;IACrB;IACA,IACE,IAAI,CAACL,OAAO,IACZ,IAAI,CAACA,OAAO,CAACN,cAAc,IAC3B,IAAI,CAACM,OAAO,CAACN,cAAc,CAACC,MAAM,GAAG,CAAC,EACtC;MACA;MACA,IAAIU,KAAK,GAAG,CAAC,EAAE;QACbA,KAAK,GAAG,CAAC;OACV,MAAM,IAAIA,KAAK,IAAI,IAAI,CAACL,OAAO,CAACN,cAAc,CAACC,MAAM,EAAE;QACtDU,KAAK,GAAG,IAAI,CAACL,OAAO,CAACN,cAAc,CAACC,MAAM,GAAG,CAAC;;MAEhD;MACA,IAAI,CAACT,iBAAiB,GAAGmB,KAAK;;EAElC;EAEAC,cAAcA,CAACD,KAAa;IAC1B;IACA;IACA,IAAI,CAACnB,iBAAiB,GAAGmB,KAAK;EAChC;EACAE,SAASA,CAAA;IACP;IACA,IAAI,CAACN,SAAS,CAAC,IAAI,CAACf,iBAAiB,GAAG,CAAC,CAAC;EAC5C;EAEAsB,aAAaA,CAAA;IACX;IACA,IAAI,CAACP,SAAS,CAAC,IAAI,CAACf,iBAAiB,GAAG,CAAC,CAAC;EAC5C;CACD;AA1EYJ,sBAAsB,GAAA2B,UAAA,EALlC7B,SAAS,CAAC;EACT8B,QAAQ,EAAE,oBAAoB;EAC9BC,WAAW,EAAE,iCAAiC;EAC9CC,SAAS,EAAE,CAAC,iCAAiC;CAC9C,CAAC,C,EACW9B,sBAAsB,CA0ElC"},"metadata":{},"sourceType":"module","externalDependencies":[]}