{"ast":null,"code":"import { Validators } from \"@angular/forms\";\nimport { environment } from \"src/app/environments/environment\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/cart.service\";\nimport * as i2 from \"src/app/service/product.service\";\nimport * as i3 from \"src/app/service/order.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"src/app/service/token.service\";\nimport * as i6 from \"@angular/router\";\nfunction OrderComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtext(1, \" H\\u1ECD v\\u00E0 t\\u00EAn l\\u00E0 tr\\u01B0\\u1EDDng b\\u1EAFt bu\\u1ED9c \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OrderComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.orderForm.get(\"email\").hasError(\"email\") ? \"Email kh\\u00F4ng h\\u1EE3p l\\u1EC7\" : \"Email l\\u00E0 tr\\u01B0\\u1EDDng h\\u1EE3p b\\u1EAFt bu\\u1ED9c\", \" \");\n  }\n}\nfunction OrderComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtext(1, \" S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i l\\u00E0 tr\\u01B0\\u1EDDng b\\u1EAFt bu\\u1ED9c v\\u00E0 \\u00EDt nh\\u1EA5t 6 k\\u00FD t\\u1EF1. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OrderComponent_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtext(1, \" \\u0110\\u1ECBa ch\\u1EC9 l\\u00E0 tr\\u01B0\\u1EDDng b\\u1EAFt bu\\u1ED9c v\\u00E0 \\u00EDt nh\\u1EA5t 5 k\\u00FD t\\u1EF1. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OrderComponent_ng_container_67_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"tr\")(2, \"td\")(3, \"div\", 38);\n    i0.ɵɵelement(4, \"img\", 39);\n    i0.ɵɵelementStart(5, \"span\", 40);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"number\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", item_r2.product.thumbnail, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r2.product.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r2.quantity);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r2.product.price);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(13, 5, item_r2.product.price * item_r2.quantity, \"1.2-2\"), \" \");\n  }\n}\nexport class OrderComponent {\n  constructor(cartService, productService, orderService, formBuilder, tokenService, router, activatedRoute) {\n    this.cartService = cartService;\n    this.productService = productService;\n    this.orderService = orderService;\n    this.formBuilder = formBuilder;\n    this.tokenService = tokenService;\n    this.router = router;\n    this.activatedRoute = activatedRoute;\n    this.cartItems = [];\n    this.couponCode = \"\";\n    this.totalAmount = 0;\n    this.orderData = {\n      user_id: 13,\n      fullname: \"\",\n      email: \"\",\n      phone_number: \"\",\n      address: \"\",\n      note: \"\",\n      total_money: 0,\n      payment_method: \"cod\",\n      shipping_method: \"express\",\n      coupon_code: \"\",\n      cart_items: []\n    };\n    this.orderForm = this.formBuilder.group({\n      fullname: [\"\", Validators.required],\n      email: [\"\", [Validators.email]],\n      phone_number: [\"\", [Validators.required, Validators.minLength(6)]],\n      address: [\"\", [Validators.required, Validators.minLength(5)]],\n      note: [\"\"],\n      shipping_method: [\"\"],\n      payment_method: [\"\"]\n    });\n  }\n  ngOnInit() {\n    debugger;\n    // this.cartService.clearCart();\n    this.orderData.user_id = this.tokenService.getUserId();\n    // Lấy danh sách sản phẩm từ giỏ hàng\n    const cart = this.cartService.getCart();\n    // Chuyển danh sách ID từ Map giỏ hàng\n    const productIds = Array.from(cart.keys());\n    debugger;\n    if (productIds.length === 0) {\n      return;\n    }\n    //get info detail product by list productIds\n    this.productService.getProductsByIds(productIds).subscribe({\n      next: products => {\n        debugger;\n        this.cartItems = productIds.map(productId => {\n          debugger;\n          const product = products.find(p => p.id === productId);\n          if (product) {\n            product.thumbnail = `${environment.apiBaseUrl}/products/images/${product.thumbnail}`;\n          }\n          return {\n            product: product,\n            quantity: cart.get(productId)\n          };\n        });\n        console.log(\"done\");\n      },\n      complete: () => {\n        debugger;\n        this.calculateTotal();\n      },\n      error: error => {\n        debugger;\n        console.error(\"Error fetching detail: \", error);\n      }\n    });\n  }\n  placeOrder() {\n    debugger;\n    if (this.orderForm.valid) {\n      // this.orderData.fullname = this.orderForm.get('fullname')!.value;\n      // this.orderData.email = this.orderForm.get('email')!.value;\n      // this.orderData.phone_number = this.orderForm.get('phone_number')!.value;\n      // this.orderData.address = this.orderForm.get('address')!.value;\n      // this.orderData.note = this.orderForm.get('note')!.value;\n      // this.orderData.shipping_method = this.orderForm.get('shipping_method')!.value;\n      // this.orderData.payment_method = this.orderForm.get('payment_method')!.value;\n      this.orderData = {\n        ...this.orderData,\n        ...this.orderForm.value\n      };\n      this.orderData.cart_items = this.cartItems.map(cartItem => ({\n        product_id: cartItem.product.id,\n        quantity: cartItem.quantity\n      }));\n    }\n    this.orderData.total_money = this.totalAmount;\n    //dữ liệu hợp lệ, gửi order đi\n    this.orderService.placeOrder(this.orderData).subscribe({\n      next: response => {\n        debugger;\n        alert(\"Đặt hàng thành công\");\n        this.cartService.clearCart();\n        this.router.navigate([\"/\"]);\n      },\n      complete: () => {\n        debugger;\n        this.calculateTotal();\n      },\n      error: error => {\n        debugger;\n        alert(`Lỗi khi đặt hàng: ${error}`);\n      }\n    });\n  }\n  calculateTotal() {\n    this.totalAmount = this.cartItems.reduce((total, item) => total + item.product.price * item.quantity, 0);\n  }\n  // Hàm xử lý việc áp dụng mã giảm giá\n  applyCoupon() {\n    // Viết mã xử lý áp dụng mã giảm giá ở đây\n    // Cập nhật giá trị totalAmount dựa trên mã giảm giá nếu áp dụng\n  }\n  static #_ = this.ɵfac = function OrderComponent_Factory(t) {\n    return new (t || OrderComponent)(i0.ɵɵdirectiveInject(i1.CartService), i0.ɵɵdirectiveInject(i2.ProductService), i0.ɵɵdirectiveInject(i3.OrderService), i0.ɵɵdirectiveInject(i4.FormBuilder), i0.ɵɵdirectiveInject(i5.TokenService), i0.ɵɵdirectiveInject(i6.Router), i0.ɵɵdirectiveInject(i6.ActivatedRoute));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OrderComponent,\n    selectors: [[\"app-order\"]],\n    decls: 82,\n    vars: 15,\n    consts: [[1, \"container\"], [1, \"intro-section\"], [3, \"formGroup\"], [1, \"row\"], [1, \"col-md-6\"], [1, \"product-header\"], [1, \"mb-3\"], [\"for\", \"fullname\", 1, \"form-label\"], [\"type\", \"text\", \"formControlName\", \"fullname\", \"id\", \"fullname\", \"required\", \"\", 1, \"form-control\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [\"for\", \"email\", 1, \"form-label\"], [\"type\", \"text\", \"formControlName\", \"email\", \"id\", \"email\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"phone\", 1, \"form-label\"], [\"type\", \"text\", \"formControlName\", \"phone_number\", \"placeholder\", \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\", \"required\", \"\", \"id\", \"phone\", 1, \"form-control\"], [\"for\", \"address\", 1, \"form-label\"], [\"type\", \"text\", \"formControlName\", \"address\", \"placeholder\", \"\\u0110\\u1ECBa ch\\u1EC9\", \"required\", \"\", \"id\", \"address\", 1, \"form-control\"], [\"for\", \"note\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"note\", \"formControlName\", \"note\", \"placeholder\", \"Ghi ch\\u00FA\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"shippingMethod\"], [\"id\", \"shippingMethod\", \"formControlName\", \"shipping_method\", 1, \"form-control\"], [\"value\", \"express\"], [\"value\", \"normal\"], [\"for\", \"paymentMethod\"], [\"id\", \"paymentMethod\", \"formControlName\", \"payment_method\", 1, \"form-control\"], [\"value\", \"cod\"], [\"value\", \"other\"], [1, \"product-order\"], [\"scope\", \"col\", 1, \"text-start\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [1, \"text-start\", \"mt-3\"], [1, \"header-text\", \"text-end\"], [1, \"mt-3\"], [1, \"input-group\"], [\"type\", \"text\", \"placeholder\", \"Nh\\u1EADp coupon\", 1, \"form-control\"], [\"type\", \"button\", 1, \"btn\", \"btn-gradient\"], [\"type\", \"button\", 1, \"btn\", \"btn-gradient\", 3, \"click\"], [1, \"invalid-feedback\"], [1, \"product-info\"], [\"alt\", \"Product Image\", 1, \"product-image\", 3, \"src\"], [1, \"product-name\"]],\n    template: function OrderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-header\");\n        i0.ɵɵelementStart(1, \"div\", 0)(2, \"div\", 1)(3, \"h1\");\n        i0.ɵɵtext(4, \"\\u0110\\u00E2y l\\u00E0 trang order\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"p\");\n        i0.ɵɵtext(6, \"S\\u1EED d\\u1EE5ng Bootstrap\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"form\", 2)(8, \"div\", 3)(9, \"div\", 4)(10, \"h2\", 5);\n        i0.ɵɵtext(11, \"Th\\u00F4ng tin ng\\u01B0\\u1EDDi nh\\u1EADn\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 6)(13, \"label\", 7);\n        i0.ɵɵtext(14, \"H\\u1ECD v\\u00E0 t\\u00EAn\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"input\", 8);\n        i0.ɵɵtemplate(16, OrderComponent_div_16_Template, 2, 0, \"div\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 6)(18, \"label\", 10);\n        i0.ɵɵtext(19, \"Email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(20, \"input\", 11);\n        i0.ɵɵtemplate(21, OrderComponent_div_21_Template, 2, 1, \"div\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"div\", 6)(23, \"label\", 12);\n        i0.ɵɵtext(24, \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(25, \"input\", 13);\n        i0.ɵɵtemplate(26, OrderComponent_div_26_Template, 2, 0, \"div\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"div\", 6)(28, \"label\", 14);\n        i0.ɵɵtext(29, \"\\u0110\\u1ECBa ch\\u1EC9\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(30, \"input\", 15);\n        i0.ɵɵtemplate(31, OrderComponent_div_31_Template, 2, 0, \"div\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"div\", 6)(33, \"label\", 16);\n        i0.ɵɵtext(34, \"Ghi ch\\u00FA\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(35, \"input\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"div\", 6)(37, \"label\", 18);\n        i0.ɵɵtext(38, \"Ph\\u01B0\\u01A1ng th\\u1EE9c v\\u1EADn chuy\\u1EC3n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"select\", 19)(40, \"option\", 20);\n        i0.ɵɵtext(41, \"Nhanh (Express)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(42, \"option\", 21);\n        i0.ɵɵtext(43, \"Th\\u01B0\\u1EDDng (Normal)\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(44, \"div\", 6)(45, \"label\", 22);\n        i0.ɵɵtext(46, \"Ph\\u01B0\\u01A1ng th\\u1EE9c thanh to\\u00E1n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(47, \"select\", 23)(48, \"option\", 24);\n        i0.ɵɵtext(49, \"Thanh to\\u00E1n khi nh\\u1EADn h\\u00E0ng (COD)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(50, \"option\", 25);\n        i0.ɵɵtext(51, \"Thanh to\\u00E1n kh\\u00E1c\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(52, \"div\", 4)(53, \"h2\", 26);\n        i0.ɵɵtext(54, \"S\\u1EA3n ph\\u1EA9m \\u0111\\u00E3 \\u0111\\u1EB7t h\\u00E0ng\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(55, \"table\")(56, \"thead\")(57, \"tr\")(58, \"th\", 27);\n        i0.ɵɵtext(59, \"S\\u1EA3n ph\\u1EA9m\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(60, \"th\", 28);\n        i0.ɵɵtext(61, \"S\\u1ED1 l\\u01B0\\u1EE3ng\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(62, \"th\", 28);\n        i0.ɵɵtext(63, \"\\u0110\\u01A1n gi\\u00E1\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(64, \"th\", 28);\n        i0.ɵɵtext(65, \"T\\u1ED5ng gi\\u00E1\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(66, \"tbody\");\n        i0.ɵɵtemplate(67, OrderComponent_ng_container_67_Template, 14, 8, \"ng-container\", 29);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(68, \"div\", 30)(69, \"h4\", 31);\n        i0.ɵɵtext(70);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(71, \"div\", 32)(72, \"h4\", 5);\n        i0.ɵɵtext(73, \"Nh\\u1EADp coupon\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(74, \"div\", 33);\n        i0.ɵɵelement(75, \"input\", 34);\n        i0.ɵɵelementStart(76, \"button\", 35);\n        i0.ɵɵtext(77, \"\\u00C1p d\\u1EE5ng\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(78, \"div\", 30)(79, \"button\", 36);\n        i0.ɵɵlistener(\"click\", function OrderComponent_Template_button_click_79_listener() {\n          return ctx.placeOrder();\n        });\n        i0.ɵɵtext(80, \" \\u0110\\u1EB7t h\\u00E0ng \");\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelement(81, \"app-footer\");\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"formGroup\", ctx.orderForm);\n        i0.ɵɵadvance(8);\n        i0.ɵɵclassProp(\"is-invalid\", ctx.orderForm.get(\"fullname\").invalid && ctx.orderForm.get(\"fullname\").touched);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", ctx.orderForm.get(\"fullname\").invalid && ctx.orderForm.get(\"fullname\").touched);\n        i0.ɵɵadvance(4);\n        i0.ɵɵclassProp(\"is-invalid\", ctx.orderForm.get(\"email\").invalid && ctx.orderForm.get(\"email\").touched);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", ctx.orderForm.get(\"email\").invalid && ctx.orderForm.get(\"email\").touched);\n        i0.ɵɵadvance(4);\n        i0.ɵɵclassProp(\"is-invalid\", ctx.orderForm.get(\"phone_number\").invalid && ctx.orderForm.get(\"phone_number\").touched);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", ctx.orderForm.get(\"phone_number\").invalid && ctx.orderForm.get(\"phone_number\").touched);\n        i0.ɵɵadvance(4);\n        i0.ɵɵclassProp(\"is-invalid\", ctx.orderForm.get(\"address\").invalid && ctx.orderForm.get(\"address\").touched);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", ctx.orderForm.get(\"address\").invalid && ctx.orderForm.get(\"address\").touched);\n        i0.ɵɵadvance(36);\n        i0.ɵɵproperty(\"ngForOf\", ctx.cartItems);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"T\\u1ED5ng gi\\u00E1: \", ctx.totalAmount, \"\");\n      }\n    },\n    styles: [\".container[_ngcontent-%COMP%] {\\n  color: white;\\n}\\n\\n.intro-section[_ngcontent-%COMP%] {\\n  color: white;\\n  padding: 20px;\\n  text-align: center;\\n}\\n\\n.product-header[_ngcontent-%COMP%] {\\n  color: rgb(233, 66, 176);\\n}\\n\\n.form-control[_ngcontent-%COMP%] {\\n  background-color: rgb(19, 23, 42);\\n  border: 1px solid rgb(29, 33, 54);\\n  color: white;\\n}\\n\\n.form-control[_ngcontent-%COMP%]:focus {\\n  border-color: white;\\n  background-color: rgb(19, 23, 42);\\n}\\n\\n.form-label[_ngcontent-%COMP%] {\\n  color: white;\\n}\\n\\n.product-header[_ngcontent-%COMP%] {\\n  color: rgb(233, 66, 176);\\n}\\n\\n.product-order[_ngcontent-%COMP%] {\\n  color: rgb(105, 244, 181);\\n}\\n\\ntable[_ngcontent-%COMP%] {\\n  width: 100%;\\n  border-radius: 10px;\\n  border: none;\\n  border-collapse: separate;\\n  border: 1px solid white;\\n  border-spacing: 0;\\n  background-color: rgb(12, 13, 54);\\n}\\n\\nth[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\\n  padding: 10px;\\n  text-align: center;\\n}\\n\\n.product-info[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.product-image[_ngcontent-%COMP%] {\\n  width: 100px;\\n  height: 100px;\\n  border-radius: 5px;\\n  margin-right: 10px;\\n}\\n\\n.product-name[_ngcontent-%COMP%] {\\n  color: white;\\n  margin-right: 10px;\\n}\\n\\n.btn-gradient[_ngcontent-%COMP%] {\\n  background: linear-gradient(to right, rgb(225, 64, 180), rgb(126, 43, 237));\\n  color: white;\\n  border-radius: 30px;\\n  width: 200px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9vcmRlci9vcmRlci5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFlBQUE7QUFDRjs7QUFDQTtFQUNFLFlBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7QUFFRjs7QUFBQTtFQUNFLHdCQUFBO0FBR0Y7O0FBREE7RUFDRSxpQ0FBQTtFQUNBLGlDQUFBO0VBQ0EsWUFBQTtBQUlGOztBQURBO0VBQ0UsbUJBQUE7RUFDQSxpQ0FBQTtBQUlGOztBQUZBO0VBQ0UsWUFBQTtBQUtGOztBQUhBO0VBQ0Usd0JBQUE7QUFNRjs7QUFKQTtFQUNFLHlCQUFBO0FBT0Y7O0FBTEE7RUFDRSxXQUFBO0VBQ0EsbUJBQUE7RUFDQSxZQUFBO0VBQ0EseUJBQUE7RUFDQSx1QkFBQTtFQUNBLGlCQUFBO0VBQ0EsaUNBQUE7QUFRRjs7QUFMQTs7RUFFRSxhQUFBO0VBQ0Esa0JBQUE7QUFRRjs7QUFOQTtFQUNFLGFBQUE7RUFDQSxtQkFBQTtBQVNGOztBQU5BO0VBQ0UsWUFBQTtFQUNBLGFBQUE7RUFDQSxrQkFBQTtFQUNBLGtCQUFBO0FBU0Y7O0FBTkE7RUFDRSxZQUFBO0VBQ0Esa0JBQUE7QUFTRjs7QUFQQTtFQUNFLDJFQUFBO0VBQ0EsWUFBQTtFQUNBLG1CQUFBO0VBQ0EsWUFBQTtBQVVGIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbnRhaW5lciB7XHJcbiAgY29sb3I6IHdoaXRlO1xyXG59XHJcbi5pbnRyby1zZWN0aW9uIHtcclxuICBjb2xvcjogd2hpdGU7XHJcbiAgcGFkZGluZzogMjBweDtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuLnByb2R1Y3QtaGVhZGVyIHtcclxuICBjb2xvcjogcmdiKDIzMywgNjYsIDE3Nik7XHJcbn1cclxuLmZvcm0tY29udHJvbCB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDE5LCAyMywgNDIpO1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkIHJnYigyOSwgMzMsIDU0KTtcclxuICBjb2xvcjogd2hpdGU7XHJcbn1cclxuXHJcbi5mb3JtLWNvbnRyb2w6Zm9jdXMge1xyXG4gIGJvcmRlci1jb2xvcjogd2hpdGU7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDE5LCAyMywgNDIpO1xyXG59XHJcbi5mb3JtLWxhYmVsIHtcclxuICBjb2xvcjogd2hpdGU7XHJcbn1cclxuLnByb2R1Y3QtaGVhZGVyIHtcclxuICBjb2xvcjogcmdiKDIzMywgNjYsIDE3Nik7XHJcbn1cclxuLnByb2R1Y3Qtb3JkZXIge1xyXG4gIGNvbG9yOiByZ2IoMTA1LCAyNDQsIDE4MSk7XHJcbn1cclxudGFibGUge1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbiAgYm9yZGVyOiBub25lO1xyXG4gIGJvcmRlci1jb2xsYXBzZTogc2VwYXJhdGU7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgd2hpdGU7XHJcbiAgYm9yZGVyLXNwYWNpbmc6IDA7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDEyLCAxMywgNTQpO1xyXG59XHJcblxyXG50aCxcclxudGQge1xyXG4gIHBhZGRpbmc6IDEwcHg7XHJcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcbi5wcm9kdWN0LWluZm8ge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxufVxyXG5cclxuLnByb2R1Y3QtaW1hZ2Uge1xyXG4gIHdpZHRoOiAxMDBweDtcclxuICBoZWlnaHQ6IDEwMHB4O1xyXG4gIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICBtYXJnaW4tcmlnaHQ6IDEwcHg7XHJcbn1cclxuXHJcbi5wcm9kdWN0LW5hbWUge1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICBtYXJnaW4tcmlnaHQ6IDEwcHg7XHJcbn1cclxuLmJ0bi1ncmFkaWVudCB7XHJcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCByZ2IoMjI1LCA2NCwgMTgwKSwgcmdiKDEyNiwgNDMsIDIzNykpO1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxuICBib3JkZXItcmFkaXVzOiAzMHB4O1xyXG4gIHdpZHRoOiAyMDBweDtcclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"names":["Validators","environment","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","orderForm","get","hasError","ɵɵelementContainerStart","ɵɵelement","ɵɵproperty","item_r2","product","thumbnail","ɵɵsanitizeUrl","ɵɵtextInterpolate","name","quantity","price","ɵɵpipeBind2","OrderComponent","constructor","cartService","productService","orderService","formBuilder","tokenService","router","activatedRoute","cartItems","couponCode","totalAmount","orderData","user_id","fullname","email","phone_number","address","note","total_money","payment_method","shipping_method","coupon_code","cart_items","group","required","minLength","ngOnInit","getUserId","cart","getCart","productIds","Array","from","keys","length","getProductsByIds","subscribe","next","products","map","productId","find","p","id","apiBaseUrl","console","log","complete","calculateTotal","error","placeOrder","valid","value","cartItem","product_id","response","alert","clearCart","navigate","reduce","total","item","applyCoupon","_","ɵɵdirectiveInject","i1","CartService","i2","ProductService","i3","OrderService","i4","FormBuilder","i5","TokenService","i6","Router","ActivatedRoute","_2","selectors","decls","vars","consts","template","OrderComponent_Template","rf","ctx","ɵɵtemplate","OrderComponent_div_16_Template","OrderComponent_div_21_Template","OrderComponent_div_26_Template","OrderComponent_div_31_Template","OrderComponent_ng_container_67_Template","ɵɵlistener","OrderComponent_Template_button_click_79_listener","ɵɵclassProp","invalid","touched"],"sources":["C:\\Users\\Admin\\Desktop\\ShopApp\\Java-Spring_Web_Angular_Shop\\FrontEnd\\src\\app\\components\\order\\order.component.ts","C:\\Users\\Admin\\Desktop\\ShopApp\\Java-Spring_Web_Angular_Shop\\FrontEnd\\src\\app\\components\\order\\order.component.html"],"sourcesContent":["import { Component, OnInit } from \"@angular/core\";\r\nimport { FormBuilder, FormGroup, Validators } from \"@angular/forms\";\r\nimport { ActivatedRoute, Router } from \"@angular/router\";\r\nimport { OrderDTO } from \"src/app/dtos/order/order.dto\";\r\nimport { environment } from \"src/app/environments/environment\";\r\nimport { Order } from \"src/app/models/order\";\r\nimport { Product } from \"src/app/models/product\";\r\nimport { CartService } from \"src/app/service/cart.service\";\r\nimport { OrderService } from \"src/app/service/order.service\";\r\nimport { ProductService } from \"src/app/service/product.service\";\r\nimport { TokenService } from \"src/app/service/token.service\";\r\n\r\n@Component({\r\n  selector: \"app-order\",\r\n  templateUrl: \"./order.component.html\",\r\n  styleUrls: [\"./order.component.scss\"],\r\n})\r\nexport class OrderComponent implements OnInit {\r\n  orderForm: FormGroup;\r\n  cartItems: { product: Product; quantity: number }[] = [];\r\n  couponCode: string = \"\";\r\n  totalAmount: number = 0;\r\n  orderData: OrderDTO = {\r\n    user_id: 13,\r\n    fullname: \"\",\r\n    email: \"\",\r\n    phone_number: \"\",\r\n    address: \"\",\r\n    note: \"\",\r\n    total_money: 0,\r\n    payment_method: \"cod\",\r\n    shipping_method: \"express\",\r\n    coupon_code: \"\",\r\n    cart_items: [],\r\n  };\r\n  constructor(\r\n    private cartService: CartService,\r\n    private productService: ProductService,\r\n    private orderService: OrderService,\r\n    private formBuilder: FormBuilder,\r\n    private tokenService: TokenService,\r\n    private router: Router,\r\n    private activatedRoute: ActivatedRoute\r\n  ) {\r\n    this.orderForm = this.formBuilder.group({\r\n      fullname: [\"\", Validators.required],\r\n      email: [\"\", [Validators.email]],\r\n      phone_number: [\"\", [Validators.required, Validators.minLength(6)]],\r\n      address: [\"\", [Validators.required, Validators.minLength(5)]],\r\n      note: [\"\"],\r\n      shipping_method: [\"\"],\r\n      payment_method: [\"\"],\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    debugger;\r\n    // this.cartService.clearCart();\r\n    this.orderData.user_id = this.tokenService.getUserId();\r\n    // Lấy danh sách sản phẩm từ giỏ hàng\r\n    const cart = this.cartService.getCart();\r\n    // Chuyển danh sách ID từ Map giỏ hàng\r\n    const productIds = Array.from(cart.keys());\r\n    debugger;\r\n    if (productIds.length === 0) {\r\n      return;\r\n    }\r\n    //get info detail product by list productIds\r\n    this.productService.getProductsByIds(productIds).subscribe({\r\n      next: (products) => {\r\n        debugger;\r\n        this.cartItems = productIds.map((productId) => {\r\n          debugger;\r\n          const product = products.find((p) => p.id === productId);\r\n          if (product) {\r\n            product.thumbnail = `${environment.apiBaseUrl}/products/images/${product.thumbnail}`;\r\n          }\r\n          return {\r\n            product: product!,\r\n            quantity: cart.get(productId)!,\r\n          };\r\n        });\r\n        console.log(\"done\");\r\n      },\r\n      complete: () => {\r\n        debugger;\r\n        this.calculateTotal();\r\n      },\r\n      error: (error: any) => {\r\n        debugger;\r\n        console.error(\"Error fetching detail: \", error);\r\n      },\r\n    });\r\n  }\r\n\r\n  placeOrder() {\r\n    debugger;\r\n    if (this.orderForm.valid) {\r\n      // this.orderData.fullname = this.orderForm.get('fullname')!.value;\r\n      // this.orderData.email = this.orderForm.get('email')!.value;\r\n      // this.orderData.phone_number = this.orderForm.get('phone_number')!.value;\r\n      // this.orderData.address = this.orderForm.get('address')!.value;\r\n      // this.orderData.note = this.orderForm.get('note')!.value;\r\n      // this.orderData.shipping_method = this.orderForm.get('shipping_method')!.value;\r\n      // this.orderData.payment_method = this.orderForm.get('payment_method')!.value;\r\n\r\n      this.orderData = {\r\n        ...this.orderData,\r\n        ...this.orderForm.value,\r\n      };\r\n      this.orderData.cart_items = this.cartItems.map((cartItem) => ({\r\n        product_id: cartItem.product.id,\r\n        quantity: cartItem.quantity,\r\n      }));\r\n    }\r\n    this.orderData.total_money = this.totalAmount;\r\n    //dữ liệu hợp lệ, gửi order đi\r\n    this.orderService.placeOrder(this.orderData).subscribe({\r\n      next: (response: Order) => {\r\n        debugger;\r\n        alert(\"Đặt hàng thành công\");\r\n        this.cartService.clearCart();\r\n        this.router.navigate([\"/\"]);\r\n      },\r\n      complete: () => {\r\n        debugger;\r\n        this.calculateTotal();\r\n      },\r\n      error: (error: any) => {\r\n        debugger;\r\n        alert(`Lỗi khi đặt hàng: ${error}`);\r\n      },\r\n    });\r\n  }\r\n\r\n  calculateTotal(): void {\r\n    this.totalAmount = this.cartItems.reduce(\r\n      (total, item) => total + item.product.price * item.quantity,\r\n      0\r\n    );\r\n  }\r\n\r\n  // Hàm xử lý việc áp dụng mã giảm giá\r\n  applyCoupon(): void {\r\n    // Viết mã xử lý áp dụng mã giảm giá ở đây\r\n    // Cập nhật giá trị totalAmount dựa trên mã giảm giá nếu áp dụng\r\n  }\r\n}\r\n","<app-header></app-header>\r\n<div class=\"container\">\r\n  <div class=\"intro-section\">\r\n    <h1>Đây là trang order</h1>\r\n    <p>Sử dụng Bootstrap</p>\r\n  </div>\r\n  <form [formGroup]=\"orderForm\">\r\n    <div class=\"row\">\r\n      <div class=\"col-md-6\">\r\n        <h2 class=\"product-header\">Thông tin người nhận</h2>\r\n        <div class=\"mb-3\">\r\n          <label for=\"fullname\" class=\"form-label\">Họ và tên</label>\r\n          <input\r\n            type=\"text\"\r\n            formControlName=\"fullname\"\r\n            class=\"form-control\"\r\n            id=\"fullname\"\r\n            required\r\n            [class.is-invalid]=\"\r\n              orderForm.get('fullname')!.invalid &&\r\n              orderForm.get('fullname')!.touched\r\n            \"\r\n          />\r\n          <div\r\n            *ngIf=\"\r\n              orderForm.get('fullname')!.invalid &&\r\n              orderForm.get('fullname')!.touched\r\n            \"\r\n            class=\"invalid-feedback\"\r\n          >\r\n            Họ và tên là trường bắt buộc\r\n          </div>\r\n        </div>\r\n        <div class=\"mb-3\">\r\n          <label for=\"email\" class=\"form-label\">Email</label>\r\n          <input\r\n            type=\"text\"\r\n            formControlName=\"email\"\r\n            class=\"form-control\"\r\n            id=\"email\"\r\n            required\r\n            [class.is-invalid]=\"\r\n              orderForm.get('email')!.invalid && orderForm.get('email')!.touched\r\n            \"\r\n          />\r\n          <div\r\n            *ngIf=\"\r\n              orderForm.get('email')!.invalid && orderForm.get('email')!.touched\r\n            \"\r\n            class=\"invalid-feedback\"\r\n          >\r\n            {{\r\n              orderForm.get(\"email\")!.hasError(\"email\")\r\n                ? \"Email không hợp lệ\"\r\n                : \"Email là trường hợp bắt buộc\"\r\n            }}\r\n          </div>\r\n        </div>\r\n        <div class=\"mb-3\">\r\n          <label for=\"phone\" class=\"form-label\">Số điện thoại</label>\r\n          <input\r\n            type=\"text\"\r\n            formControlName=\"phone_number\"\r\n            placeholder=\"Số điện thoại\"\r\n            required\r\n            class=\"form-control\"\r\n            id=\"phone\"\r\n            [class.is-invalid]=\"\r\n              orderForm.get('phone_number')!.invalid &&\r\n              orderForm.get('phone_number')!.touched\r\n            \"\r\n          />\r\n          <div\r\n            *ngIf=\"\r\n              orderForm.get('phone_number')!.invalid &&\r\n              orderForm.get('phone_number')!.touched\r\n            \"\r\n            class=\"invalid-feedback\"\r\n          >\r\n            Số điện thoại là trường bắt buộc và ít nhất 6 ký tự.\r\n          </div>\r\n        </div>\r\n        <div class=\"mb-3\">\r\n          <label for=\"address\" class=\"form-label\">Địa chỉ</label>\r\n          <input\r\n            type=\"text\"\r\n            formControlName=\"address\"\r\n            class=\"form-control\"\r\n            placeholder=\"Địa chỉ\"\r\n            required\r\n            id=\"address\"\r\n            [class.is-invalid]=\"\r\n              orderForm.get('address')!.invalid &&\r\n              orderForm.get('address')!.touched\r\n            \"\r\n          />\r\n          <div\r\n            *ngIf=\"\r\n              orderForm.get('address')!.invalid &&\r\n              orderForm.get('address')!.touched\r\n            \"\r\n            class=\"invalid-feedback\"\r\n          >\r\n            Địa chỉ là trường bắt buộc và ít nhất 5 ký tự.\r\n          </div>\r\n        </div>\r\n        <div class=\"mb-3\">\r\n          <label for=\"note\" class=\"form-label\">Ghi chú</label>\r\n          <input\r\n            type=\"text\"\r\n            class=\"form-control\"\r\n            id=\"note\"\r\n            formControlName=\"note\"\r\n            placeholder=\"Ghi chú\"\r\n            required\r\n          />\r\n        </div>\r\n        <div class=\"mb-3\">\r\n          <label for=\"shippingMethod\">Phương thức vận chuyển</label>\r\n          <select\r\n            class=\"form-control\"\r\n            id=\"shippingMethod\"\r\n            formControlName=\"shipping_method\"\r\n          >\r\n            <option value=\"express\">Nhanh (Express)</option>\r\n            <option value=\"normal\">Thường (Normal)</option>\r\n          </select>\r\n        </div>\r\n        <div class=\"mb-3\">\r\n          <label for=\"paymentMethod\">Phương thức thanh toán</label>\r\n          <select\r\n            class=\"form-control\"\r\n            id=\"paymentMethod\"\r\n            formControlName=\"payment_method\"\r\n          >\r\n            <option value=\"cod\">Thanh toán khi nhận hàng (COD)</option>\r\n            <option value=\"other\">Thanh toán khác</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"col-md-6\">\r\n        <h2 class=\"product-order\">Sản phẩm đã đặt hàng</h2>\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th scope=\"col\" class=\"text-start\">Sản phẩm</th>\r\n              <th scope=\"col\">Số lượng</th>\r\n              <th scope=\"col\">Đơn giá</th>\r\n              <th scope=\"col\">Tổng giá</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <ng-container *ngFor=\"let item of cartItems\">\r\n              <tr>\r\n                <td>\r\n                  <div class=\"product-info\">\r\n                    <img\r\n                      [src]=\"item.product.thumbnail\"\r\n                      alt=\"Product Image\"\r\n                      class=\"product-image\"\r\n                    />\r\n                    <span class=\"product-name\">{{ item.product.name }}</span>\r\n                  </div>\r\n                </td>\r\n                <td>{{ item.quantity }}</td>\r\n                <td>{{ item.product.price }}</td>\r\n                <td>\r\n                  {{ item.product.price * item.quantity | number : \"1.2-2\" }}\r\n                </td>\r\n              </tr>\r\n            </ng-container>\r\n          </tbody>\r\n        </table>\r\n        <div class=\"text-start mt-3\">\r\n          <h4 class=\"header-text text-end\">Tổng giá: {{ totalAmount }}</h4>\r\n        </div>\r\n        <div class=\"mt-3\">\r\n          <h4 class=\"product-header\">Nhập coupon</h4>\r\n          <div class=\"input-group\">\r\n            <input type=\"text\" class=\"form-control\" placeholder=\"Nhập coupon\" />\r\n            <button class=\"btn btn-gradient\" type=\"button\">Áp dụng</button>\r\n          </div>\r\n        </div>\r\n        <div class=\"text-start mt-3\">\r\n          <button (click)=\"placeOrder()\" class=\"btn btn-gradient\" type=\"button\">\r\n            Đặt hàng\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</div>\r\n<app-footer></app-footer>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}